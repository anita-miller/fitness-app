<!-- views/mapPage.ejs -->
<!doctype html>
<html>
<head>
  <title>Digicache</title>
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css"> <!-- load bootstrap css -->
  <script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.0.2/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css"> <!-- load fontawesome -->
  <link rel="stylesheet" type="text/css" href="/css/mapPage.css">
  <link href="https://fonts.googleapis.com/css?family=Lora|Montserrat|Raleway" rel="stylesheet">
  <!-- https://stackoverflow.com/questions/1364858/what-steps-should-i-take-to-protect-my-google-maps-api-key -->
  <script
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC2k87H3qZCAJY4_ZLmw6sKDHeWdg_DnBM&libraries=places">
  </script>
  <script type="text/javascript" src="/js/mapPage.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
  <div class ="navbar navbar-default">
    <div class="container-fluid">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/"><h4>Digicache</h4></a>
      </div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav">
          <li class="active"><a href="/map"><h4>Map</h4><span class="sr-only">(current)</span></a></li>
          <li><a href="/profile"><h4>Profile</h4></a></li>
          <li><a href="/Ranking"><h4>Ranks</h4></a></li>
        </ul>
      </div>
    </div>
  </div>
  <div id="searchBar" class="text-center col-md-4 col-md-offset-4">
    <input id="locationSearchBar" type="text" placeholder="Search Box">
    <button class="btn btn-primary" type="button" id="centerLocation"><span class="fa fa-location-arrow"></span></button>
  </div>
  <!-- Google map stuff here -->
  <div class="container">
    <div id="map"></div>
  </div>

  <div class="listOfCaches">
    <% markers.forEach(cache => { %>
      <div class="col-md-4 col-sm-12 col-xs-12 cacheInfo">
        <div class="crop">
          <img class="img-responsive" src=<%=cache.location.imgSmall%> >
        </div>
        <div>
          <h1><%= cache.location.name %></h1>
          <form action ="cache" method = "get">
            <button type="submit" name="cacheID" class="btn btn-primary openCacheButton" value=<%= cache.id %> >View Cache</button>
          </form>
        </div>
      </div>
    <%})%>
  </div>
</body>
<script>
  initMap(<%- JSON.stringify(markers) %>);
</script>
</html>
